<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css" media = "screen">
    <title>Forms</title>
</head>
<body>
	<header>
		<h1>This Form Does Processing Things</h1>
	</header>
	<nav>
		<a href="#">link</a>
		<a href="#">link</a>
		<a href="#">link</a>
		<a href="#">link</a>
		<a href="#">link</a>	
	</nav>
	<main>
		<div id="message"></div>
		<form action="processing.html" method="post" id="myForm">
			<fieldset>
			<legend>Sign Up</legend>
			<div class="formRow">
				<label for="fname">First Name:</label>
				<input id="fname" type="text" name="first" placeholder="Jack">
			</div>
			<div class="formRow">
				<label for="lname">Last Name:</label>
				<input id="lname" type="text" name="last" placeholder="Wilson">
			</div>
			<div class="formRow">
				<label for="age">Password: </label>
				<input type="text" name="age" id="age">
			</div>
			<div class="formRow">
				<div class="spacer"></div>
				<input type="submit">
			</div>
			<div class="formRow">	
				<label for="rad1">Choice 1 </label>
				<input type="radio" name="radio1">
			</div>
			<div class="formRow">	
				<label for="rad2">Choice 2 </label>
				<input type="radio" name="radio1">
			</div>
			<div class="formRow">	
				<label for="resetbtn">Reset Button</label>
				<input type="reset">
			</div>
			<div class="checkRow">	
				<div class="spacer"></div>
				<label for="fname">
					<input type="checkbox">
					Chekhov's Chekbox
				</label>
			</div>	
			<div class="formRow">	
				<label for="fname">Select from List</label> 
				
				<select name="things" id="things">
					<option value="lead pipe">Lead Pipe</option>
					<option value="candlestick">Candlestick</option>
					<option value="knife">Knife</option>
					<option value="poison">Poison</option>
					<option value="pistol">Pistol</option>
				</select>
			
			</div>
			</fieldset>
			
		</form>
		
		<ol>
			<li>JavaScript is a programming language created by Sun Microsystems as a competitor for programming on webservers.</li>
			<li>JS can be run in the D.O.M. (Document Object Model), i.e. in the browser, or through Node.js</li>
			<li>JQuery was the most popular front-end JS library.</li>
			<li>React is now the most popular front-end JS library.</li>
		</ol>
	</main>
	<footer>
		<p>
			&copy; Jack Wilson's Form Machine
		</p>
	</footer>
	<script>
		document.getElementById('myForm').addEventListener('submit',function(event){
			event.preventDefault();
			const firstName = document.getElementById('fname').value;
			const lastName = document.getElementById('lname').value;
			
			const formData = {
				firstName: firstName,
				lastName: lastName
			};
			
			const xhr = new XMLHttpRequest();
			xhr.open("POST", "submit.json", true);
			xhr.setRequestHeader("Content-Type," "application/json;characterset=UTF-8");
			xhr.onreadystatechange = function (){
				if(xhr.readyState === 4 && xhr.status === 200){
					const response = JSON.parse(xhr.responseText)
					document.getElementByID("message").innerHTML = response.message;
					document.getElementByID("myForm").innerHTML = "";
				}
				else if(xhr.readyState === 4){
					alert('Error submitting form.');
				}
			};
			
			xhr.send(JSON.stringify(formData));
			
			console.log(formData);
		}
	</script>
</body>
</html>